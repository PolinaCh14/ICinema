@model ProfileViewModel
@{
    ViewData["title"] = "Замовлення оформлено!";
    var movieName = Model.Orders.Tickets.First().Session.Movie.MovieName;
    var hall = Model.Orders.Tickets.First().Session.Hall;
    var date = Model.Orders.Tickets.First().Session.Date;
    var time = Model.Orders.Tickets.First().Session.Time;
}
@{
    ViewData["Title"] = "Мій кабінет";
}
<div class="block">

    <ul class="nav nav-tabs tabs-control" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" type="button" role="tab" aria-controls="profile-tab-pane" aria-selected="true">Ваш профіль</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="orders-tab" data-bs-toggle="tab" data-bs-target="#orders-tab-pane" type="button" role="tab" aria-controls="orders-tab-pane" aria-selected="false">Історія замовлень</button>
        </li>
    </ul>


    <div class="tab-content" id="myTabContent">


        <div class="tab-pane fade show active profile-information" id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
            <div class="align-profile-content" id="show-profile">
                <div class="col-md-6 block-center">
                    @* <table>
                    <tr>
                    <td>Ім'я:</td>
                    <td>@Model.FirstName</td>
                    </tr>
                    <tr>
                    <td>Прізвище:</td>
                    <td>@Model.LastName</td>
                    </tr>
                    <tr>
                    <td>Email:</td>
                    <td>@Model.Email</td>
                    </tr>
                    <tr>
                    <td>Телефон:</td>
                    <t>@Model.PhoneNumber</t>
                    </tr>
                    </table> *@
                    <div class="row bottom-border p-lines ">
                        <label for="staticEmail" class="col-sm-2 col-form-label">Ім'я:</label>
                        <div class="col-sm-10">
                            <input type="text" readonly class="form-control-plaintext" id="firstName-field" value="@Model.FirstName">
                        </div>
                    </div>
                    <div class="row bottom-border p-lines">
                        <label for="staticEmail" class="col-sm-2 col-form-label">Прізвище:</label>
                        <div class="col-sm-10">
                            <input type="text" readonly class="form-control-plaintext" id="lastName-field" value="@Model.LastName">
                        </div>
                    </div>
                    <div class="row bottom-border p-lines">
                        <label for="staticEmail" class="col-sm-2 col-form-label">Email:</label>
                        <div class="col-sm-10">
                            <input type="text" readonly class="form-control-plaintext" id="email-field" value="@Model.Email">

                        </div>
                    </div>
                    <div class="row bottom-border p-lines">
                        <label for="staticEmail" class="col-sm-2 col-form-label">Телефон:</label>
                        <div class="col-sm-10">
                            <input type="phone" readonly class="form-control-plaintext" id="phone-field" value="@Model.PhoneNumber">
                        </div>
                    </div>

                    <div class="align-right">
                        <button class="button-primary button1" id="redact">Редагувати</button>
                    </div>
                </div>
            </div>


            <div class="align-profile-content" id="edit-profile">

                <form asp-action="MyProfile" method="post" asp-antiforgery="true">

                    <input type="hidden" asp-for="IsEditMode" />


                    <div class="col-md-6 block-center">
                        <div class="row bottom-border p-lines ">
                            <label for="staticEmail" class="col-sm-2 col-form-label">Ім'я:</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control-plaintext" id="firstName-field" value="@Model.FirstName" asp-for="FirstName">
                            </div>
                        </div>
                        <span asp-validation-for="FirstName"></span>
                        <div class="row bottom-border p-lines">
                            <label for="staticEmail" class="col-sm-2 col-form-label">Прізвище:</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control-plaintext" id="lastName-field" value="@Model.LastName" asp-for="LastName">
                            </div>
                        </div>
                        <span asp-validation-for="LastName"></span>
                        <div class="row bottom-border p-lines">
                            <label for="staticEmail" class="col-sm-2 col-form-label">Email:</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control-plaintext" id="email-field" value="@Model.Email" asp-for="Email">
                            </div>
                        </div>
                        <span asp-validation-for="Email"></span>
                        <div class="row bottom-border p-lines">
                            <label for="staticEmail" class="col-sm-2 col-form-label">Телефон:</label>
                            <div class="col-sm-10">
                                <input type="phone" class="form-control-plaintext" id="phone-field" value="@Model.PhoneNumber" asp-for="PhoneNumber">
                            </div>
                        </div>
                        <span asp-validation-for="PhoneNumber"></span>


                        <div asp-validation-summary="ModelOnly" class="text-danger mt-4"></div>

                        <div class="align-right">
                            <div class="form-group">
                                <button type="submit" class="button-primary button1" id="save">Зберегти</button>
                            </div>
                        </div>
                    </div>
                </form>

            </div>
        </div>

        <div class="tab-pane fade" id="orders-tab-pane" role="tabpanel" aria-labelledby="orders-tab" tabindex="0">
            замовлення

            <div class="order-result-page">
                <div class="order-result__header">
                    <h2>Замовлення оформлено! </h2>
                    <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-patch-check-fill" viewBox="0 0 16 16">
                        <path d="M10.067.87a2.89 2.89 0 0 0-4.134 0l-.622.638-.89-.011a2.89 2.89 0 0 0-2.924 2.924l.01.89-.636.622a2.89 2.89 0 0 0 0 4.134l.637.622-.011.89a2.89 2.89 0 0 0 2.924 2.924l.89-.01.622.636a2.89 2.89 0 0 0 4.134 0l.622-.637.89.011a2.89 2.89 0 0 0 2.924-2.924l-.01-.89.636-.622a2.89 2.89 0 0 0 0-4.134l-.637-.622.011-.89a2.89 2.89 0 0 0-2.924-2.924l-.89.01zm.287 5.984-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708.708" />
                    </svg>
                </div>
                <div class="order">
                    <p class="order__orderid">№@Model.Orders.OrderId</p>
                    <div class="order__session-info">
                        <h3>@movieName</h3>
                        <div class="session-info__session">
                            <div class="datetime">
                                <img src="~/images/icons/calendar.png" />
                                <span>@date, @date.DayOfWeek</span>
                            </div>
                            <div class="datetime">
                                <img src="~/images/icons/clock.png" />
                                <span>@time</span>
                            </div>
                            <div class="datetime">Зал №@hall.HallId @hall.HallName</div>
                        </div>
                    </div>
                    <div class="order__tickets">
                        @foreach (var ticket in Model.Orders.Tickets)
                        {
                            <div class="order__ticket">
                                <p>@ticket.Seat.RowNumber ряд</p>
                                <p>@ticket.Seat.SeatNumber місце</p>
                                <p>@ticket.Price грн.</p>
                            </div>
                        }
                    </div>
                    <div class="order__summary">
                        <p>Загалом: @Model.Orders.Price грн.</p>
                        <p>Статус замовлення: @Model.Orders.OrderStatus</p>
                    </div>
                </div>
            </div>









        </div>
    </div>
</div>

@section scripts {
    <script>

        let model = @Html.Raw(Json.Serialize(Model))
                                                                                                debugger;

        $(document).ready(function () {
            if (model.isEditMode == true) {
                $("#show-profile").hide();
                $("#edit-profile").show()
            }
            else {
                $("#edit-profile").hide();
                $("#redact").click(function () {
                    $("#show-profile").hide();
                    $("#edit-profile").show()
                });
            }
        });

    </script>
}